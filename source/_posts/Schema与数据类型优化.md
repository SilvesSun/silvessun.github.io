---
title: Schema与数据类型优化
date: 2018-03-13 11:05:10
tags:
 - MySQL
 - 优化
 categories:
 - 读书笔记
 - 高性能MySQL
---

## 优化的数据类型
不管存储哪种类型的数据, 注意几个基本的原则:
1. 更小的通常更好
2. 简单就好
   简单数据类型的操作通常需要更少的CPU周期, 例如整型比字符操作代价更低. 两个例子: 应该使用內建的类型而不是字符串来存储时间和日期, 应该用整型来存储IP地址.
3. 尽量避免NULL

### 整型
TINYINT, SMALLINT, MEDIAINT, INT, BIGINT, 分别使用8, 16, 24, 32, 64位存储空间.

整型有可选的UNSIGNED属性, 表示不允许负值, 可以将正数的上限提高一倍

### 实数类型
- DECIMAL用于存储精确的小数.
- 因为CPU不支持DECIMAL而支持浮点的运算, 所以相对而言, 浮点运算更快
- 浮点类型在存储同样范围的值时, 通常比DECIMAL使用更小的空间
- MySQL使用DOUBLE作为内部浮点计算的类型
- DECIMAL需要额外的空间和计算开销来进行小数计算 , 所以只有当需要精确计算的时候才使用.

### 字符串类型
#### VARCHAR & CHAR
这两种字符串类型在磁盘和内存中的存储方式依据存储引擎的不同而不同, 下面的套路基于Innodb 或者MyISAM

##### varchar
- varchar用于存储可变长字符串, 它比定长类型更节省空间.
- varchar需要使用1到2个额外字节记录字符串的长度

##### char
当存储char值时, MySQL会删除所有的末尾空格. char非常适合存储密码的MD5值, 因为这是一个定长的值; 经常变更的项目, char也比varchar更好.

#### BLOB & TEXT
用于存储很大的数据而设计的字符串数据类型, 分别采用二进制和字符方式存储
